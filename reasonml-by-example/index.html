<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Open Sans','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Open Sans','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Montserrat','Georgia',serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Montserrat','Georgia',serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Montserrat','Georgia',serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Montserrat','Georgia',serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Montserrat','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><meta name="generator" content="Gatsby 2.3.25"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title data-react-helmet="true">ReasonML by example | Oleksandr Dubenko</title><meta data-react-helmet="true" name="description" content="Facebook team did WHAT?"/><meta data-react-helmet="true" property="og:title" content="ReasonML by example"/><meta data-react-helmet="true" property="og:description" content="Facebook team did WHAT?"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Oleksandr Dubenko"/><meta data-react-helmet="true" name="twitter:title" content="ReasonML by example"/><meta data-react-helmet="true" name="twitter:description" content="Facebook team did WHAT?"/><meta data-react-helmet="true" name="twitter:image"/><meta data-react-helmet="true" name="og:image"/><style data-href="/styles.f6303ad6cd08983a1734.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-4124805c0503dbfe42dd67d7f5715964.woff2) format("woff2"),url(/static/montserrat-latin-100-c8fb2f714bbc7bc3e8dfffa916b286dc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e4bf47bd171a9b2a72dd84c58bf90edf.woff2) format("woff2"),url(/static/montserrat-latin-100italic-d1f3f2d02ee4d7d2d4b1ad865014f189.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-444ae007121264bc1969d49b4031f9b2.woff2) format("woff2"),url(/static/montserrat-latin-200-edbce16a90aa22c297a0307b85789837.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-f316c5d1ec40f3e68654c3f38b3999f3.woff2) format("woff2"),url(/static/montserrat-latin-200italic-d7bbb730d9b5e11720b3eb32326dcca7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-0a7c6df06e85d978d096d4d18fd8d43d.woff2) format("woff2"),url(/static/montserrat-latin-300-5e86df2cad22d2ef2b03516334afae5e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-c076c4892bc7a4be7b9097e97a35012d.woff2) format("woff2"),url(/static/montserrat-latin-300italic-37c74a8d2d0d36a0a2c6e9a37ee15b0c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-501ce09c42716a2f6e1503a25eb174c9.woff2) format("woff2"),url(/static/montserrat-latin-400-f29d2b8559699b6beb5b29b25b8bc572.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-882908d9950d9c86ebd380877f293d95.woff2) format("woff2"),url(/static/montserrat-latin-400italic-22e7b04e5f2a901d49d4d342315a715a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-f0f2716c5fe401d175b88715e7d28685.woff2) format("woff2"),url(/static/montserrat-latin-500-991b453bf90a0980e78966d2af7e3d3a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-4590ebba421b3288c305305d7fa7b504.woff2) format("woff2"),url(/static/montserrat-latin-500italic-f3d41e4cdcc2314e49ddcea751d6f87f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-15c24f7109941777774ddd2c636c6a50.woff2) format("woff2"),url(/static/montserrat-latin-600-f6dc6096f48956908c1787d9a722570a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-6d10b80529d5c36c7c09fca7193af0fc.woff2) format("woff2"),url(/static/montserrat-latin-600italic-02c4833312d94b1b0866f073023a250e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-79982cd1f74c6fa7451bf9b37ead09ff.woff2) format("woff2"),url(/static/montserrat-latin-700-957e93fbbe131a59791cd820d98b7109.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-283438e9577fe6a684466bb100e105ec.woff2) format("woff2"),url(/static/montserrat-latin-700italic-ca627c5ccc65cf80c2ecaea44b997de9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-35386154b78d046218fc8f88a44ff515.woff2) format("woff2"),url(/static/montserrat-latin-800-756655905d91b77960888262e7d58d35.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-e1b52a7bd83e2324db6d92bdc206844c.woff2) format("woff2"),url(/static/montserrat-latin-800italic-a69f0add9d86c1a84311d7dd8693ba4a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-260c2ea3ef57feb82251952e605a36d5.woff2) format("woff2"),url(/static/montserrat-latin-900-186cae8091da578150d81958e217714a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-d785fb9fc74588ffb7f306799709a97d.woff2) format("woff2"),url(/static/montserrat-latin-900italic-43b527fe77254f97ea36e2b54e845ec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-]{border-radius:6px;box-shadow:0 5px 12px rgba(0,0,0,.2);margin:.2em 0 2em!important}:not(pre)>code[class*=language-]{background:#eee!important;color:#333}</style><link as="script" rel="preload" href="/component---src-templates-blog-post-js-de166f9f59b42eea908c.js"/><link as="script" rel="preload" href="/1-1faaa5378ab808ebfa96.js"/><link as="script" rel="preload" href="/app-890b1048cfacab557622.js"/><link as="script" rel="preload" href="/styles-70229fde2057b45fd713.js"/><link as="script" rel="preload" href="/webpack-runtime-367618cbb2ec312e0b40.js"/><link as="fetch" rel="preload" href="/static/d/788/path---reasonml-by-example-39-f-ec8-aZXS7Az4gTvNvDIQ0LH8p1sR94s.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:45.5rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0;font-weight:600"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Oleksandr Dubenko</a></h3></header><main><h1>ReasonML by example</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">April 21, 2019</p><div><h2>Hi</h2><p>I really want to share with you about this magnificent language <a href="https://reasonml.github.io/">ReasonML</a>.</p><p>Before we start let me tell you that this is a gentle introduction for people mainly coming from javascript background (like me). I’m by no means an expert in reason or functional programming and if you are serious about learning reason you should checkout out (after reading this post of course) <a href="https://reasonml.github.io/docs/en/what-and-why">official documentation</a> and <a href="http://reasonmlhub.com/exploring-reasonml/toc.html">awesome book by Dr Axel Rauschmayer</a>.</p><h2>Intro</h2><p>Remember when you first chained <code class="language-text">map</code> calls on array in js? Remember how cool you felt when you wrote your first <code class="language-text">.reduce((a,b) =&gt; a + b)</code>? If you’re like me than you probably found that writing and composing pure functions
just felt ‘right’. Writing functional code is very satisfying. And while javascript has some cool functional tricks built-in (like first class functions, closuers, etc) it still has some flaws (who needs both <code class="language-text">null</code> and <code class="language-text">undefined</code>?) and shortcomings that aren’t trivial to improve/fix because of that whole “don’t break the web” stuff.</p><p>To improve experience of writing code that runs on web several compile-to-js languages popped out. Some were succesful and some were not. Today I’ll try to show that this language is <a href="https://www.youtube.com/watch?v=lzEweA7RPi0">serious business</a>.</p><p>ReasonML — a functional programming language oriented mainly towards javascript developers. Let’s look at some of the benefits it offers:</p><ul><li><p><strong>Compilation to JS</strong><br/>
<!-- -->It compiles to javascript. Not only it produces mostly readable and performant javascript code but it happens really fast. TypeScript i really love you but damn your builds are slow.</p></li><li><p><strong>Full-featured battle-tested functional programming language</strong><br/>
<!-- -->ReasonML is actually OCaml with a different syntax. And while Reason is relatively new project, OCaml is not. It’s more than 20 years old language.</p></li><li><p><strong>Sound type system</strong><br/>
<!-- -->It means that types don’t lie to you. “Pure Reason program has no null bugs.”</p></li><li><p><strong>Familiar syntax</strong><br/>
<!-- -->You can probably already read it just fine. It looks just like js. (for a <em>reason</em> <sup><sub>sorry I promise I won’t do reason puns</sub></sup>)</p></li></ul><h2>Show, don’t tell</h2><p>After playing with it I had an urge to write something that I never really liked. I never liked writing tree structures and recursive functions. Oh the sweet memories of juggling with pointers and if statements in c++ to make trees and mental gymnastics to figure out how to write that recursive functions. I hated it. Until I tried Reasonml.</p><p>You probably know about N-Body simulation. Also why did everyone still let them get away with naming variables with one letter? And it’s different letter every time (look at k-nn!!)</p><p>There is this approximation of n-body simulation called Barnes–Hut simulation. Using it I want to create a interactive playground with potentially large amount of bodies. (Something inspired by falling sand game).</p><p>Welcome to my let’s write episode 1 of 500.</p><p>In this post I’ll implement one part of Barnes–Hut simulation which is spatial quadtree. It is not that complicated as it sounds and just means that it divides 2D space into squares and every node in the tree can have up to 4 children. To do a division of 3D space we would need an octotree.</p><p><undefined>
  <a class="gatsby-resp-image-link" href="/static/43b632815a9aac05024873e4495e98c1/b6db4/quadtree.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:590px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:54.77084898572502%;position:relative;bottom:0px;left:0px;background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0px;vertical-align:middle;position:absolute;top:0px;left:0px;box-shadow:inset 0px 0px 0px 400px white" alt="quadtree" title="" src="/static/43b632815a9aac05024873e4495e98c1/b9e4f/quadtree.png" srcSet="/static/43b632815a9aac05024873e4495e98c1/cf440/quadtree.png 148w,/static/43b632815a9aac05024873e4495e98c1/d2d38/quadtree.png 295w,/static/43b632815a9aac05024873e4495e98c1/b9e4f/quadtree.png 590w,/static/43b632815a9aac05024873e4495e98c1/f9b6a/quadtree.png 885w,/static/43b632815a9aac05024873e4495e98c1/2d849/quadtree.png 1180w,/static/43b632815a9aac05024873e4495e98c1/b6db4/quadtree.png 1331w" sizes="(max-width: 590px) 100vw, 590px"/>
    </span>
  </span>
  
  </a>
    </undefined></p><p>Walk with me. Process of setting up reason project is described over <a href="https://reasonml.github.io/docs/en/installation">here</a> but if you’re too lazy to click that here are commands to paste in terminal:</p><div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn global add bs-platform
bsb -init my-new-project -theme basic-reason</code></pre></div><p>Also don’t forget to grab a <a href="https://marketplace.visualstudio.com/items?itemName=jaredly.reason-vscode">plugin</a> for your favorite editor.</p><p>Let’s start from the module called Vector.
In Reason every file is a <a href="https://reasonml.github.io/docs/en/module">Module</a>. Module name has to be capitalized.</p><p><strong>Vector.re</strong></p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> t <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> make <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> v1<span class="token punctuation">.</span>x <span class="token operator">+.</span> v2<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> v1<span class="token punctuation">.</span>y <span class="token operator">+.</span> v2<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> random <span class="token operator">=</span> max <span class="token operator">=&gt;</span> make<span class="token punctuation">(</span><span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Math</span><span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*.</span> max<span class="token punctuation">,</span> <span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Math</span><span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*.</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>Everything from module is available in every part of your program by writing for example <code class="language-text">Vector.add</code>. No export/import is needed.</p><p>Notice how it has declared <code class="language-text">type t</code>? When we want to describe type of vector we would probably call that type <code class="language-text">vector</code> right? But we already have a module <code class="language-text">Vector</code> named like that so in reason there is a convention to use <code class="language-text">t</code> as a name for main type of the module.</p><p>Let’s look at function <code class="language-text">make</code></p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> make <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Can you guess what it does? One thing that you might notice is that there are no types. That beacuse types are inferred (guessed). By looking at current scope reason can notice that there is a type that has the same shape as the return shape <code class="language-text">{x, y}</code> and from that type it knows that <code class="language-text">x</code> and <code class="language-text">y</code> are floats. Pretty cool, right? And while most of the times it can guess correctly you can still write types yourself.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> make <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> float<span class="token punctuation">,</span> y<span class="token punctuation">:</span> float<span class="token punctuation">)</span><span class="token punctuation">:</span> t <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>On to the next line! Adding vectors:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> v1<span class="token punctuation">.</span>x <span class="token operator">+.</span> v2<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> v1<span class="token punctuation">.</span>y <span class="token operator">+.</span> v2<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Pretty straightforward but wait what are those dots after plus sign? Remember all those jokes from backend devs about how you can write <code class="language-text">[]+![]</code> and get an <code class="language-text">false</code> string in js? Yeah we can’t do that in reason. For adding integers there is <code class="language-text">+</code> operator and for adding floats there is <code class="language-text">+.</code> operator (and it is the same with other math operations). <a href="https://reasonml.github.io/docs/en/integer-and-float#design-decisions">That might change in future</a>.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> random <span class="token operator">=</span> max <span class="token operator">=&gt;</span> make<span class="token punctuation">(</span><span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Math</span><span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*.</span> max<span class="token punctuation">,</span> <span class="token class-name">Js</span><span class="token punctuation">.</span><span class="token class-name">Math</span><span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*.</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>In this function we are calling native js function <code class="language-text">Math.random</code> by using <code class="language-text">Js</code> module.</p><p>Let’s define body as something that has mass and position.</p><p><strong>Body.re</strong></p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> t <span class="token operator">=</span> <span class="token punctuation">{</span>
  mass<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
  pos<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>t<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> make <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>mass<span class="token punctuation">:</span> <span class="token number">10.0</span><span class="token punctuation">,</span> pos<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token number">512.0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Next, I’ll add the module for bounding box. We will construct quadtree out of these squares and we will also need to split them into four equal boxes also called quadrants.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> t <span class="token operator">=</span> <span class="token punctuation">{</span>
  topLeft<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>t<span class="token punctuation">,</span>
  side<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Box definition consists of its’ top left point and size of the side.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> quadrant <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token constructor variable">NE</span>
  <span class="token operator">|</span> <span class="token constructor variable">NW</span>
  <span class="token operator">|</span> <span class="token constructor variable">SE</span>
  <span class="token operator">|</span> <span class="token constructor variable">SW</span><span class="token punctuation">;</span></code></pre></div><p>Alright something new. What you see here is called <a href="https://reasonml.github.io/docs/en/variant">Variant type</a>. Marked with an exclamation point in reason documents because of how awesome this thing is.</p><p>What we are declaring here is that <code class="language-text">quadrant</code> is a type that can be either of these values: NE, NW, SE, SW. This is a supersimple example of a variant type but don’t judge it as a enum just yet. I’ll show more of it later.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> getSubquadrantBbox <span class="token operator">=</span> <span class="token punctuation">(</span>bbox<span class="token punctuation">,</span> quadrant<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> halfSide <span class="token operator">=</span> bbox<span class="token punctuation">.</span>side <span class="token operator">/.</span> <span class="token number">2.0</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> topLeftOffset <span class="token operator">=</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>quadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token constructor variable">NW</span> <span class="token operator">=&gt;</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token constructor variable">NE</span> <span class="token operator">=&gt;</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span>halfSide<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token constructor variable">SW</span> <span class="token operator">=&gt;</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> halfSide<span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token constructor variable">SE</span> <span class="token operator">=&gt;</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span>halfSide<span class="token punctuation">,</span> halfSide<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>side<span class="token punctuation">:</span> halfSide<span class="token punctuation">,</span> topLeft<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>bbox<span class="token punctuation">.</span>topLeft<span class="token punctuation">,</span> topLeftOffset<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>In this function we want to get one of the four possible subquadrants of the box. New size will be exactly half of the current box and then we need to calculate where the new top left point will be. Here the (pattern matching)<!-- -->[https://reasonml.github.io/docs/en/pattern-matching]<!-- --> expression is used. In docs it is called “one of the best features of the language” and I agree. In short, concise way it is handling all variants of the quadrant variable. Also it will scream at you if you forget to handle some variant. (Have you ever forgot to handle some action in redux reducer? I sure did) Did you notice that you can assign it to a value?</p><p>Last value in the body of the function is returned so we don’t need to write <code class="language-text">return</code>.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> quadrantFromPoint <span class="token operator">=</span> <span class="token punctuation">(</span>bbox<span class="token punctuation">,</span> point<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>topLeft<span class="token punctuation">,</span> side<span class="token punctuation">}</span> <span class="token operator">=</span> bbox<span class="token punctuation">;</span>
  <span class="token keyword">let</span> center <span class="token operator">=</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>topLeft<span class="token punctuation">,</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span>side <span class="token operator">/.</span> <span class="token number">2.0</span><span class="token punctuation">,</span> side <span class="token operator">/.</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> center<span class="token punctuation">.</span>x<span class="token punctuation">,</span> point<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> center<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constructor variable">SE</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constructor variable">NE</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constructor variable">SW</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constructor variable">SE</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>In this function we return in which quadrant is the point. A beloved feature in js <a href="https://reasonml.github.io/docs/en/destructuring">destructuring</a> is also here.
And we are using pattern matching on two boolean values because we can.</p><p>With Vector, Body and BBox modules done lets write octotree.</p><p><strong>Tree.re</strong></p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> t <span class="token operator">=</span> <span class="token punctuation">{</span>
  body<span class="token punctuation">:</span> option<span class="token punctuation">(</span><span class="token class-name">Body</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>
  bbox<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>t<span class="token punctuation">,</span>
  ne<span class="token punctuation">:</span> option<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>
  nw<span class="token punctuation">:</span> option<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>
  se<span class="token punctuation">:</span> option<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>
  sw<span class="token punctuation">:</span> option<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>There is a new <code class="language-text">option</code> type here. In reason there are no null or undefined and thats great. Instead <code class="language-text">option</code> type is used for values that can be empty. You can skip this if you’re familiar with Java Optional type.</p><h3>Option</h3><p>Lets imagine we have a function that searches and maybe returns string as result.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> searchResult <span class="token operator">=</span> search<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Does some search and returns option(string) */</span></code></pre></div><p>Result can be either <code class="language-text">Some(string)</code> or <code class="language-text">None</code>.
In fact <code class="language-text">option</code> is just a variant type defined like this:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">type</span> option<span class="token punctuation">(</span><span class="token operator">&#x27;</span>a<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constructor variable">None</span> <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span><span class="token operator">&#x27;</span>a<span class="token punctuation">)</span></code></pre></div><p>Where <code class="language-text">&#x27;a</code> means some type. Similar to T in generics in other languages.</p><p>And to handle such value we can use pattern matching.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">switch</span><span class="token punctuation">(</span>searchResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">None</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;No result :(&quot;</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name">Js</span><span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;Result is: &quot;</span><span class="token operator">+</span><span class="token operator">+</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div><p>In second case we unpacked <code class="language-text">result</code> from <code class="language-text">Some</code> value and were forced to handle empty result.</p><p>You can read more about Option <a href="https://reasonml.github.io/docs/en/null-undefined-option">here</a>.</p><p>So going back to our tree example. We are defining tree node as record that has a defined bounding box in space, maybe has a body and maybe has four child nodes in four quadrants. This type is recursive.</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> make <span class="token operator">=</span>
    <span class="token punctuation">(</span>
      <span class="token operator">~</span>bbox<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>t<span class="token operator">=</span><span class="token punctuation">{</span>side<span class="token punctuation">:</span> <span class="token number">512.0</span><span class="token punctuation">,</span> topLeft<span class="token punctuation">:</span> <span class="token class-name">Vector</span><span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">~</span>body<span class="token operator">=</span><span class="token constructor variable">None</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  body<span class="token punctuation">,</span>
  bbox<span class="token punctuation">,</span>
  ne<span class="token punctuation">:</span> <span class="token constructor variable">None</span><span class="token punctuation">,</span>
  nw<span class="token punctuation">:</span> <span class="token constructor variable">None</span><span class="token punctuation">,</span>
  se<span class="token punctuation">:</span> <span class="token constructor variable">None</span><span class="token punctuation">,</span>
  sw<span class="token punctuation">:</span> <span class="token constructor variable">None</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Function <code class="language-text">make</code> creates a tree node. It takes two named parameters. To make a parameter named we put a <code class="language-text">~</code> sign before its name. Both of these parameters have default value defined after <code class="language-text">=</code> sign. To make named parameter optional you can use <code class="language-text">?</code> as default value. Ok so why does it have empty brackets as a third parameter? Because of the currying it is unclear what to do with function when using some of the parameters. Should function call <code class="language-text">make(~body)</code> return new curried function or should it call <code class="language-text">make</code> function because <code class="language-text">~bbox</code> is optional? For that reason we need to add positional argument (non-labeled) which is conventionally <code class="language-text">()</code>.</p><p>Like in javascript if field name and value are named the same we can write it once</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  body<span class="token punctuation">:</span> body
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span><span class="token punctuation">{</span>
  body
<span class="token punctuation">}</span></code></pre></div><p>Both are the same.</p><p>Simple function for returning a child from the node</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> getNode <span class="token operator">=</span> <span class="token punctuation">(</span>tree<span class="token punctuation">,</span> quadrant<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>quadrant<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>quadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">SE</span> <span class="token operator">=&gt;</span> tree<span class="token punctuation">.</span>se
  <span class="token operator">|</span> <span class="token constructor variable">NE</span> <span class="token operator">=&gt;</span> tree<span class="token punctuation">.</span>ne
  <span class="token operator">|</span> <span class="token constructor variable">SW</span> <span class="token operator">=&gt;</span> tree<span class="token punctuation">.</span>sw
  <span class="token operator">|</span> <span class="token constructor variable">NW</span> <span class="token operator">=&gt;</span> tree<span class="token punctuation">.</span>nw
  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>In this function we define type for the quadrant because it is not in scope. For that we would need to open module like this:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">open</span> <span class="token constructor variable">BBox</span></code></pre></div><p>It will make contents of the module visible in scope (not copied) so we could write <code class="language-text">quadrant</code> instead of <code class="language-text">BBox.quadrant</code>.</p><p>Function for adding a child to a node:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> setNode <span class="token operator">=</span> <span class="token punctuation">(</span>tree<span class="token punctuation">:</span> t<span class="token punctuation">,</span> where<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>quadrant<span class="token punctuation">,</span> node<span class="token punctuation">:</span> t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>where<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">SE</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>tree<span class="token punctuation">,</span> se<span class="token punctuation">:</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token constructor variable">NE</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>tree<span class="token punctuation">,</span> ne<span class="token punctuation">:</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token constructor variable">SW</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>tree<span class="token punctuation">,</span> sw<span class="token punctuation">:</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token constructor variable">NW</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>tree<span class="token punctuation">,</span> nw<span class="token punctuation">:</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Oh yeah, spread operator is also present in Reason!</p><p>Function for creating single node:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> createNode <span class="token operator">=</span> <span class="token punctuation">(</span>bbox<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>t<span class="token punctuation">,</span> quadrant<span class="token punctuation">:</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>quadrant<span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token class-name">Body</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> subquadrant <span class="token operator">=</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>getSubquadrantBbox<span class="token punctuation">(</span>bbox<span class="token punctuation">,</span> quadrant<span class="token punctuation">)</span><span class="token punctuation">;</span>
  make<span class="token punctuation">(</span><span class="token operator">~</span>bbox<span class="token operator">=</span>subquadrant<span class="token punctuation">,</span> <span class="token operator">~</span>body<span class="token operator">=</span><span class="token constructor variable">Some</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Notice how <code class="language-text">body</code> is wrapped in <code class="language-text">Some</code>. Because <code class="language-text">~body</code> parameter is of type <code class="language-text">option</code> we can’t just pass the value.</p><p>Function for inserting a body intro a tree:</p><div class="gatsby-highlight" data-language="reason"><pre class="language-reason"><code class="language-reason"><span class="token keyword">let</span> <span class="token keyword">rec</span> insert <span class="token operator">=</span> <span class="token punctuation">(</span>tree<span class="token punctuation">:</span> t<span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token class-name">Body</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>tree<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">let</span> quadrant <span class="token operator">=</span> <span class="token class-name">BBox</span><span class="token punctuation">.</span>quadrantFromPoint<span class="token punctuation">(</span>tree<span class="token punctuation">.</span>bbox<span class="token punctuation">,</span> body<span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> child <span class="token operator">=</span> getNode<span class="token punctuation">(</span>tree<span class="token punctuation">,</span> quadrant<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> insert<span class="token punctuation">(</span>node<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token constructor variable">None</span> <span class="token operator">=&gt;</span> setNode<span class="token punctuation">(</span>tree<span class="token punctuation">,</span> quadrant<span class="token punctuation">,</span> createNode<span class="token punctuation">(</span>tree<span class="token punctuation">.</span>bbox<span class="token punctuation">,</span> quadrant<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token operator">|</span> <span class="token constructor variable">None</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>tree<span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token constructor variable">Some</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Here comes the most interesting part: recursive function for inserting nodes. Look how small it is!! I must admit that this is not first version of this function but after some tries I’m really happy with the result.</p><p>In this function we need to find and/or create a node for body. We either find appropriate box with no body or recursively divide space until we do.</p><h2>Compiling</h2><p>After running <code class="language-text">bsb -make-world</code> it will compile every <code class="language-text">.re</code> file to <code class="language-text">.bs.js</code> and I encourage you to look at the produced code as it is quite readable and interesting. For example options’ <code class="language-text">None</code> value is just an <code class="language-text">undefined</code> how cool is that?</p><h2>Next</h2><p>If we hit 100k likes then I’ll try to visualize the quadtree using Canvas API and show you how to do JS interop in the next part.</p></div><div></div><hr style="margin-bottom:1.75rem"/><div style="display:flex;margin-bottom:4.375rem"><p>Blog by<!-- --> <a href="https://twitter.com/dubenko_">Oleksandr Dubenko</a></p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li><a rel="next" href="/life-after-google/">Life After Google — Map For Your Web App<!-- --> →</a></li></ul></main><footer></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-138671614-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"reasonml-by-example-39f","path":"/reasonml-by-example/"};window.dataPath="788/path---reasonml-by-example-39-f-ec8-aZXS7Az4gTvNvDIQ0LH8p1sR94s";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-890b1048cfacab557622.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-573928976ec2dba9e470.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-de166f9f59b42eea908c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-47883caf3466661f4a6c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-8564e9b1bf17c034e168.js"],"pages-manifest":["/pages-manifest-4c1e50557e7aaed69a77.js"]};/*]]>*/</script><script src="/webpack-runtime-367618cbb2ec312e0b40.js" async=""></script><script src="/styles-70229fde2057b45fd713.js" async=""></script><script src="/app-890b1048cfacab557622.js" async=""></script><script src="/1-1faaa5378ab808ebfa96.js" async=""></script><script src="/component---src-templates-blog-post-js-de166f9f59b42eea908c.js" async=""></script></body></html>